<div align= "center">
    <h1>CSCI3100 Project - CUHKG</h1>
</div>

<div align="center">
<img src="frontend/public/logo.webp" style="width: 300px" alt="CUHKG-logo, generated by GPT-4o">
</div>

<p align="center">
    <a href="https://github.com/iafcy/CSCI3100_Project" target="_blank" >Github Repo</a>
</p>
<p align="center">
   <a href="#introduction" target="_blank">Introduction</a>
    â€¢
   <a href="#core-technologies" target="_blank">Core Technologies</a>
    â€¢
   <a href="#installation" target="_blank">Installation</a>
    â€¢
   <a href="#project-structure" target="_blank">Project structure</a>
</p>

## Introduction

This is the group project for the course CSCI3100 Software Engineering (2025 Spring) at the Chinese University of Hong Kong.

CUHKG is a web-forum designed for members of The Chinese University of Hong Kong (CUHK) to engage in discussions on diverse topics inspired by LIHKG.

## Core Technologies

<div>
    <img src="https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white">
    <img src="https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB">
    <img src="https://img.shields.io/badge/Material%20UI-007FFF?style=for-the-badge&logo=mui&logoColor=white">
    <img src="https://img.shields.io/badge/Node%20js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white">
    <img src="https://img.shields.io/badge/Express%20js-000000?style=for-the-badge&logo=express&logoColor=white">
    <img src="https://img.shields.io/badge/Supabase-181818?style=for-the-badge&logo=supabase&logoColor=white">
    <img src="https://img.shields.io/badge/Cypress-17202C?style=for-the-badge&logo=cypress&logoColor=white">
</div>

## Installation

1. Prerequisites

- Node.js (v22+)

2. Clone the repositry

```bash
git clone https://github.com/iafcy/CSCI3100_Project.git
cd CSCI3100_Project
```

3. Install NPM packages

```bash
npm install
```

4. Run the application

```bash
# For development

# Run frontend and backend at root in parallel
npm run dev

# Run frontend and backend at root separately
npm run dev --workspace=frontend
npm run dev --workspace=backend
```

## Project structure

- [`/frontend`](frontend/README.md) - ReactJS Frontend
- [`/backend`](backend/README.md) - ExpressJS Backend

```
ðŸ“¦
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.ts
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ server.ts
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ utils/
|   â”œâ”€â”€ test/
|   |   â”œâ”€â”€ unit/
â”‚   â”‚   â””â”€â”€ integration/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”œâ”€â”€ main.tsx
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ utils/
â”œâ”€â”€ cypress/
â”‚   â”œâ”€â”€ e2e/
â”‚   â””â”€â”€ support/
â”œâ”€â”€ supabase/
â”‚   â””â”€â”€ seed.sql
â”œâ”€â”€Â package-lock.json
â”œâ”€â”€Â package.json
â””â”€â”€ tsconfig.json
```

## End-to-end testing

The End-to-end tests test the entire application including frontend, backend, and the database (local instance) to verify that the application is functioning cohesively as a whole.

The tests make use of a local instance of Supabase.

#### Setup for End-to-end testing

1. Prerequisites

- Docker

2. Setup Supabase

```bash
npx supabase login

# It will pull all necessary docker images if you do not have them
npx supabase start

# Link the cloud instance to the local instance
npx supabase link --project-ref <project-id>
npx supabase db pull

# Reset the local instance and populate with seed data in ../supabase/seed.sql
npx supabase db reset
```

3. Copy .env.sample in both `/frontend` and `/backend`

```bash
cp .env.example .env.test
```

4. Setup environment variables for the local instance in `/backend`

```bash
API_PORT=<Port number for the backend>

LOG_LEVEL=<Log level for logger>

SUPABASE_DB_PASSWORD=<Password for accessing Supabase>
SUPABASE_URL=<URL for connecting to Supabase>
SUPABASE_KEY=<ANON API key for accessing Supabase>
SUPABASE_SERVICE_KEY=<Secret service API key for accessing Supabase>
```

5. Setup environment variables for the local instance in `/frontend`

```bash
VITE_BACKEND_API_URL=<URL of the backend server>

VITE_SUPABASE_URL=<URL for connecting to Supabase>
VITE_SUPABASE_KEY=<ANON API key for accessing Supabase>
```

6. Run the frontend and backend

```bash
npm run test:e2e --workspace=backend
npm run test:e2e --workspace=frontend
```

Tests files can be found in `/cypress/e2e`. Execute the following command to execute the tests.

```bash
npm run cypress:open # launches the cypress test runner
# or
npm run cypress:ci # tests in a headless browser
```
